<odoo>
    <template id="report_summary_invoice_document">
        <t t-call="web.external_layout">
            <div
                t-field="o.partner_id.commercial_partner_id"
                t-options='{"widget": "contact", "fields": ["phone"]}'
            />
            <div class="page">
                <h2>
                    <span t-if="o.state == 'billed'">Billing</span>
                    <span t-if="o.state == 'draft'">Draft Billing</span>
                    <span t-if="o.state == 'cancel'">Cancelled Billing</span>
                    <span t-field="o.name" />
                </h2>
                <div
                    id="informations"
                    class="row mt32 mb32 d-flex justify-content-between"
                >
                    <div class="col-auto mw-100 mb-2">
                        <strong>Invoice Date:</strong>
                        <span t-field="o.threshold_date" />
                    </div>
                    <div class="col-auto mw-100 mb-2 text-right">
                        <span t-field="o.narration" />
                    </div>
                </div>
                <table class="table table-sm o_main_table" style="border: 1px solid;">
                    <thead>
                        <tr>
                            <th>
                                <span>Amount of Last Billing</span>
                            </th>
                            <th>
                                <span>Receive Amount</span>
                            </th>
                            <th>
                                <span>Balance</span>
                            </th>

                            <th>
                                <span>Untaxed Amount</span>
                            </th>
                            <th>
                                <span>Tax</span>
                            </th>
                            <th>
                                <span>Total</span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td />
                            <td />
                            <td />
                            <td>
                                <span t-field="o.amount_untaxed" />
                            </td>
                            <td>
                                 <span t-field="o.taxes" />
                            </td>
                            <td>
                                 <span t-field="o.total_amount" />
                            </td>
                        </tr>
                    </tbody>
                </table>
                <table class="table table-sm o_main_table" style="border: 1px solid;">
                    <thead>
                        <tr>
                            <th>
                                <div
                                    style="border-bottom: 1px solid #000; padding-bottom: 5px;"
                                >Date</div>
                                <div>Invoice No.</div>
                            </th>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Uom</th>
                            <th>Price</th>
                            <th>Tax</th>
                            <th>Subtotal</th>
                            <th>Sale Order No.</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="o.billing_line_ids" t-as="line">
                            <t t-set='invoice' t-value='line.move_id' />
                            <t
                                t-set="taxes"
                                t-value="', '.join([(tax.description or tax.name) for tax in invoice.invoice_line_ids[0].tax_ids])"
                            />
                            <tr>
                                <td>
                                    <span t-field="invoice.invoice_date" /><br />
                                    <span t-field="invoice.name" />
                                </td>
                                <td>
                                    <span
                                        t-field="invoice.invoice_line_ids[0].product_id.display_name"
                                    />
                                </td>
                                <td>
                                    <span
                                        t-field="invoice.invoice_line_ids[0].quantity"
                                    />
                                </td>
                                <td>
                                    <span
                                        t-field="invoice.invoice_line_ids[0].product_uom_id.name"
                                    />
                                </td>
                                <td>
                                    <span
                                        t-field="invoice.invoice_line_ids[0].price_unit"
                                    />
                                </td>
                                <td><span t-esc="taxes" /></td>
                                <td>
                                    <span
                                        t-field="invoice.invoice_line_ids[0].price_subtotal"
                                    />
                                </td>
                                <td>
                                    <span
                                        t-field="invoice.invoice_line_ids[0].sale_line_ids.order_id.name"
                                    />
                                </td>
                            </tr>
                            <t t-foreach="invoice.invoice_line_ids[1:]" t-as="line">
                                <t
                                    t-set="taxes"
                                    t-value="', '.join([(tax.description or tax.name) for tax in line.tax_ids])"
                                />
                                <tr>
                                    <td />
                                    <td>
                                        <span t-field="line.product_id.display_name" />
                                    </td>
                                    <td><span t-field="line.quantity" /></td>
                                    <td><span t-field="line.product_uom_id.name" /></td>
                                    <td><span t-field="line.price_unit" /></td>
                                    <td><span t-esc="taxes" /></td>
                                    <td><span t-field="line.price_subtotal" /></td>
                                    <td>
                                        <span
                                            t-field="line.sale_line_ids.order_id.name"
                                        />
                                    </td>
                                </tr>
                            </t>
                            <tr>
                                <td />
                                <td colspan="7"><i class="fa fa-square" /><span
                                        t-field="invoice.partner_id.name"
                                    /></td>
                            </tr>
                            <tr>
                                <td />
                                <td colspan="5">Amount Untaxed</td>
                                <td><span t-field="invoice.amount_untaxed" /></td>
                                <td />
                            </tr>
                            <tr>
                                <td />
                                <td colspan="5">Total</td>
                                <td><span t-field="invoice.amount_total" /></td>
                                <td />
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </template>
    <template id="report_summary_invoice">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="l10n_jp_summary_invoice.report_summary_invoice_document" />
            </t>
        </t>
    </template>
</odoo>
